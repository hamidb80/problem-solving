# Advent of Code 2023 day 3 in BQN
# ideas from https://www.youtube.com/watch?v=77uUu4vcZ-8

nl â† '
'
Stencil3  â† {
  map â†  ğ•©
  râ€¿c â† â‰¢ğ•©
  Impl â† {
    a â† 0 âŒˆ (ğ•¨-1)
    c â† 0 âŒˆ (ğ•©-1)
    b â† 3 - (ğ•¨=0) âˆ¨ (ğ•¨=r-1)
    d â† 3 - (ğ•©=0) âˆ¨ (ğ•©=c-1)
    {dâ†‘ câ†“ ğ•©} Ë˜ bâ†‘ aâ†“ map
  }
  (â†•r) ImplâŒœ â†•c
}
Solve â† {
  raw     â† ğ•© âˆ¾ nl
  ids     â† Â¯1 + ((+` Â»<âŠ¢) âˆ§ âŠ¢) raw âˆŠ "0123456789"
  numbers â† â€¢ParseFloat Â¨ ids âŠ” raw
  adj   â† â¥Š (Â¯1âŠ¸â‰  âŠ¸/Â·â·â¥Š) Â¨ Stencil3 (âŠ‘ ğ•© âŠ nl)â€¿â†‘ â¥Š ids
  part1 â† +Â´       numbers âŠËœ âˆ¾            (Â¬ raw âˆŠ nl âˆ¾ ".0123456789") / adj
  part2 â† +Â´ Ã—Â´ Ë˜ (numbers âŠËœ > {2=â‰ âˆ˜>Ë˜ğ•©} âŠ¸/ (raw âˆŠ "*")                / adj)
  part1 â‹ˆ part2
}

# âŸ¨ 527144 81463996 âŸ©
Solve 1â†“"
467..114..
...*......
..35..633.
......#...
617*......
.....+.58.
..592.....
......755.
...$.*....
.664.598.."
